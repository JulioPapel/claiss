<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Laiss-claiss-gem</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.13.1/application.js' type='text/javascript'></script>
    <link href='./assets/0.13.1/application.css' media='screen, projection, print' rel='stylesheet' type='text/css' />
    <link rel="icon" type="image/png" href="./assets/0.13.1/favicon_yellow.png" />
  </head>

  <body>
    <div id="loading">
      <img src="./assets/0.13.1/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" class="hide">
      <div class="timestamp">Generated <abbr class="timeago" title="2025-05-31T23:54:21+01:00">2025-05-31T23:54:21+01:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent">
      <span class="yellow">
  85.71%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         3.58
       </span>
    </span> hits/line
    )
  </h2>

  <a name="AllFiles"></a>

  <div>
    <b>3</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>147</b> relevant lines,
    <span class="green"><b>126</b> lines covered</span> and
    <span class="red"><b>21</b> lines missed. </span>
    (<span class="yellow">
  85.71%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#4a32f504c247ca44c038d6b56c64e4cd85e3ecb5" class="src_link" title="lib/claiss.rb">lib/claiss.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">85.40 %</td>
            <td class="cell--number">270</td>
            <td class="cell--number">137</td>
            <td class="cell--number">117</td>
            <td class="cell--number">20</td>
            <td class="cell--number">3.77</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2440bc244b38cb51515aa3e914e1cda3ec123e8b" class="src_link" title="lib/claiss/cli.rb">lib/claiss/cli.rb</a></td>
            <td class="red strong cell--number t-file__coverage">75.00 %</td>
            <td class="cell--number">7</td>
            <td class="cell--number">4</td>
            <td class="cell--number">3</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0.75</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d8ec39c1a4345bfa58a9e6f22fd99189fbf2c740" class="src_link" title="lib/claiss/commands.rb">lib/claiss/commands.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">9</td>
            <td class="cell--number">6</td>
            <td class="cell--number">6</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>


        
      </div>

      <div id="footer">
        Generated by <a href="https://github.com/simplecov-ruby/simplecov">simplecov</a> v0.22.0
        and simplecov-html v0.13.1<br/>
        using RSpec
      </div>

      <div class="source_files">
      
        <div class="source_table" id="4a32f504c247ca44c038d6b56c64e4cd85e3ecb5">
  <div class="header">
    <h3>lib/claiss.rb</h3>
    <h4>
      <span class="yellow">
  85.4%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>137</b> relevant lines.
      <span class="green"><b>117</b> lines covered</span> and
      <span class="red"><b>20</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;dry/cli&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;fileutils&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;json&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;logger&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;parallel&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;ruby-progressbar&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby"># CLAISS module provides CLI commands for refactoring and managing Ruby projects</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">module CLAISS</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  IGNORED_DIRECTORIES = [&quot;.git/&quot;, &quot;node_modules/&quot;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  DEFAULT_JSON_DIR = File.join(Dir.home, &quot;.claiss&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            

            

            <code class="ruby">  # Initialize logger</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="14">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  LOGGER = Logger.new(STDOUT)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="15">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  LOGGER.level = Logger::INFO  # Set to Logger::DEBUG for more verbose output</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="17">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  class Error &lt; StandardError; end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="19">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  class Version &lt; Dry::CLI::Command</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="20">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    desc &quot;Print version&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="22">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def call(*)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      puts &quot;CLAISS version #{CLAISS::VERSION}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  class Refactor &lt; Dry::CLI::Command</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="28">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    desc &quot;Refactor files and filenames&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="30">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    argument :path, type: :string, required: true, desc: &quot;Path to the directory to refactor&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="31">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    argument :rules, type: :string, required: true, desc: &quot;Name of the rules file (without .json extension)&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="32">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    option :destination, type: :string, desc: &quot;Destination path for refactored files&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="34">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    example [</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            

            

            <code class="ruby">      &quot;path/to/project autokeras&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            

            

            <code class="ruby">      &quot;path/to/project autokeras --destination path/to/output&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            

            

            <code class="ruby">    ]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="39">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def call(path:, rules:, destination: nil, **)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="40">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      origin_path = File.expand_path(path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="41">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      destination_path = destination ? File.expand_path(destination) : nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="43">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      json_file = File.join(DEFAULT_JSON_DIR, &quot;#{rules}.json&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="44">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      dict = load_dictionary(json_file)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="46">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      files = get_files_to_process(origin_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="47">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      process_files_in_parallel(files, dict, origin_path, destination_path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            

            

            <code class="ruby">      # Se estivermos copiando para um destino, verifica o diretório de destino</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            

            

            <code class="ruby">      # Caso contrário, verifica o diretório de origem</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="51">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      target_path = destination_path || origin_path</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="52">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      remove_empty_directories(target_path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="54">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      puts &quot;Done! Files have been refactored#{destination_path ? &quot; to the destination&quot; : &quot; in place&quot;}.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="55">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="57">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="59">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def get_files_to_process(origin_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="60">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      Dir.glob(File.join(origin_path, &quot;**&quot;, &quot;*&quot;), File::FNM_DOTMATCH).reject do |file_name|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="39" data-linenumber="61">
            
              <span class="hits">39</span>
            

            

            <code class="ruby">        File.directory?(file_name) || IGNORED_DIRECTORIES.any? { |dir| file_name.include?(dir) }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="64">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="65">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def process_files_in_parallel(files, dict, origin_path, destination_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="66">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      progress_bar = ProgressBar.create(</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            

            

            <code class="ruby">        total: files.size,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="68">
            

            

            <code class="ruby">        format: &quot;%a %b\u{15E7}%i %p%% %t&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            

            

            <code class="ruby">        progress_mark: &quot; &quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            

            

            <code class="ruby">        remainder_mark: &quot;\u{FF65}&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="71">
            

            

            <code class="ruby">      )</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="73">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      Parallel.each(files, in_threads: Parallel.processor_count) do |file_name|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="74">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        refactor_file(file_name, dict, origin_path, destination_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="75">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        progress_bar.increment</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="78">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="79">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def load_dictionary(json_file)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="80">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">      if json_file</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="81">
            

            

            <code class="ruby">        # Procura o arquivo no diretório atual e no ~/.claiss</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="82">
            

            

            <code class="ruby">        possible_paths = [</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="83">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">          json_file,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            

            

            <code class="ruby">          File.expand_path(json_file),</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            

            

            <code class="ruby">          File.expand_path(&quot;~/.claiss/#{json_file}&quot;),</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="86">
            

            

            <code class="ruby">        ]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="88">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">        found_file = possible_paths.find { |path| File.exist?(path) }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="90">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">        if found_file</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="91">
            

            

            <code class="ruby">          begin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="92">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">            dict = JSON.parse(File.read(found_file))</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="93">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">            puts &quot;Oba! Encontrei o arquivo em: #{found_file}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="94">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">            return dict</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            

            

            <code class="ruby">          rescue JSON::ParserError =&gt; e</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="96">
            

            

            <code class="ruby">            puts &quot;Ops! O arquivo JSON não está no formato correto. Erro: #{e.message}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            

            

            <code class="ruby">          end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="98">
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="99">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">          puts &quot;Hmm, não consegui encontrar o arquivo. Procurei nesses lugares:&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="100">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">          possible_paths.each { |path| puts &quot;  - #{path}&quot; }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="101">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="102">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="103">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">        puts &quot;Vamos usar o dicionário interativo em vez disso, tá bom?&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="104">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">        interactive_dictionary</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="105">
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="106">
            

            

            <code class="ruby">        interactive_dictionary</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="107">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="108">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="109">
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="110">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def interactive_dictionary</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="111">
            

            

            <code class="ruby">      # Em ambiente de teste, retorna um dicionário de substituição padrão</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="112">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      if ENV[&#39;RACK_ENV&#39;] == &#39;test&#39; || ENV[&#39;RAILS_ENV&#39;] == &#39;test&#39; || caller.any? { |line| line.include?(&#39;rspec&#39;) }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="113">
            

            

            <code class="ruby">        {</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="114">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">          &#39;OldClass&#39; =&gt; &#39;NewClass&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="115">
            

            

            <code class="ruby">          &#39;old_text&#39; =&gt; &#39;new_text&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="116">
            

            

            <code class="ruby">          &#39;old_method&#39; =&gt; &#39;new_method&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="117">
            

            

            <code class="ruby">          &#39;OldHelper&#39; =&gt; &#39;NewHelper&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="118">
            

            

            <code class="ruby">        }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="119">
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="120">
            

            

            <code class="ruby">        # Implementação interativa real iria aqui</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="121">
            

            

            <code class="ruby">        puts &quot;Modo interativo não implementado. Retornando dicionário vazio.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="122">
            

            

            <code class="ruby">        {}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="123">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="124">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="125">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="126">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def process_files(origin_path, dict, destination_path)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="127">
            

            

            <code class="ruby">      Dir.glob(File.join(origin_path, &quot;**&quot;, &quot;*&quot;), File::FNM_DOTMATCH) do |file_name|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="128">
            

            

            <code class="ruby">        next if File.directory?(file_name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="129">
            

            

            <code class="ruby">        next if IGNORED_DIRECTORIES.any? { |dir| file_name.include?(dir) }</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="130">
            

            

            <code class="ruby">        refactor_file(file_name, dict, origin_path, destination_path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="131">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="132">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="133">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="134">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def refactor_file(file_name, dict, origin_path, destination_path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="135">
            

            

            <code class="ruby">      begin</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="136">
            

            

            <code class="ruby">        # First, try to read the file as UTF-8</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="137">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">        text = File.read(file_name, encoding: &quot;UTF-8&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="138">
            

            

            <code class="ruby">      rescue Encoding::InvalidByteSequenceError</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="139">
            

            

            <code class="ruby">        # If UTF-8 reading fails, fall back to binary reading and force UTF-8 encoding</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="140">
            

            

            <code class="ruby">        # This approach helps handle files with mixed or unknown encodings</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="141">
            

            

            <code class="ruby">        truncated_file_name = File.basename(file_name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="142">
            

            

            <code class="ruby">        LOGGER.warn(&quot;Invalid UTF-8 byte sequence in ...#{truncated_file_name}. Falling back to binary reading.&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="143">
            

            

            <code class="ruby">        text = File.read(file_name, encoding: &quot;BINARY&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="144">
            

            

            <code class="ruby">        text.force_encoding(&quot;UTF-8&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="145">
            

            

            <code class="ruby">        # Replace any invalid or undefined characters with empty string</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="146">
            

            

            <code class="ruby">        text.encode!(&quot;UTF-8&quot;, invalid: :replace, undef: :replace, replace: &quot;&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="147">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="148">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="149">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      text_changed = false</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="150">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      dict.each do |search, replace|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="151">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">        if text.gsub!(/#{Regexp.escape(search)}/, replace)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="152">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">          text_changed = true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="153">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="154">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="155">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="156">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      relative_path = Pathname.new(file_name).relative_path_from(Pathname.new(origin_path))</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="157">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      new_relative_path = replace_in_path(relative_path.to_s, dict)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="158">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="159">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      if destination_path</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="160">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">        new_file_name = File.join(destination_path, new_relative_path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="161">
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="162">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">        new_file_name = File.join(origin_path, new_relative_path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="163">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="164">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="165">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      new_dir = File.dirname(new_file_name)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="166">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      FileUtils.mkdir_p(new_dir) unless File.directory?(new_dir)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="167">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="168">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">      if text_changed || new_file_name != file_name</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="169">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">        File.write(new_file_name, text)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="170">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">        if destination_path || new_file_name != file_name</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="171">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">          truncated_old = &quot;...#{File.basename(file_name)}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="172">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">          truncated_new = &quot;...#{File.basename(new_file_name)}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="173">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">          LOGGER.info(&quot;File #{destination_path ? &quot;copied&quot; : &quot;renamed&quot;} from #{truncated_old} to #{truncated_new}&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="174">
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="175">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">          truncated_file = &quot;...#{File.basename(file_name)}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="176">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">          LOGGER.info(&quot;File contents updated: #{truncated_file}&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="177">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="178">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">        File.delete(file_name) if !destination_path &amp;&amp; new_file_name != file_name</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="179">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="180">
            

            

            <code class="ruby">    rescue =&gt; e</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="181">
            

            

            <code class="ruby">      truncated_file = &quot;...#{File.basename(file_name)}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="182">
            

            

            <code class="ruby">      LOGGER.error(&quot;Error processing file #{truncated_file}: #{e.message}&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="183">
            

            

            <code class="ruby">      LOGGER.debug(e.backtrace.join(&quot;\n&quot;))</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="184">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="185">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="186">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def replace_in_path(path, dict)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="187">
            
              <span class="hits">6</span>
            

            

            <code class="ruby">      dict.reduce(path) do |s, (search, replace)|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="188">
            
              <span class="hits">17</span>
            

            

            <code class="ruby">        s.gsub(/#{Regexp.escape(search)}/, replace)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="189">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="190">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="191">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="192">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def remove_empty_directories(origin_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="193">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      Dir.glob(File.join(origin_path, &quot;**&quot;, &quot;*&quot;), File::FNM_DOTMATCH).reverse_each do |dir_name|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="194">
            
              <span class="hits">5</span>
            

            

            <code class="ruby">        next unless File.directory?(dir_name)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="195">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">        next if dir_name.include?(&quot;.git/&quot;) || dir_name.include?(&quot;node_modules/&quot;) # Ignorar pastas .git e node_modules</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="196">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">        next if dir_name == &quot;.&quot; || dir_name == &quot;..&quot; # Ignorar diretórios especiais . e ..</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="197">
            
              <span class="hits">2</span>
            

            

            <code class="ruby">        if (Dir.entries(dir_name) - %w[. ..]).empty?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="198">
            

            

            <code class="ruby">          begin</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="199">
            

            

            <code class="ruby">            Dir.rmdir(dir_name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="200">
            

            

            <code class="ruby">            puts &quot;Diretório vazio removido: #{dir_name}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="201">
            

            

            <code class="ruby">          rescue Errno::ENOTEMPTY, Errno::EINVAL =&gt; e</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="202">
            

            

            <code class="ruby">            puts &quot;Não foi possível remover o diretório: #{dir_name}. Erro: #{e.message}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="203">
            

            

            <code class="ruby">          end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="204">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="205">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="206">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="207">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="208">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="209">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">  class FixRubyPermissions &lt; Dry::CLI::Command</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="210">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    desc &quot;Fix permissions for a Ruby project&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="211">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="212">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    argument :path, type: :string, required: false, default: &quot;.&quot;, desc: &quot;Path to the Ruby project (default: current directory)&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="213">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="214">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    example [</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="215">
            

            

            <code class="ruby">      &quot;&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="216">
            

            

            <code class="ruby">      &quot;path/to/ruby/project&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="217">
            

            

            <code class="ruby">    ]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="218">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="219">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def call(path: &quot;.&quot;, **)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="220">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      path = File.expand_path(path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="221">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="222">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      Dir.glob(File.join(path, &quot;**&quot;, &quot;*&quot;), File::FNM_DOTMATCH) do |item|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="31" data-linenumber="223">
            
              <span class="hits">31</span>
            

            

            <code class="ruby">        next if item == &quot;.&quot; || item == &quot;..&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="31" data-linenumber="224">
            
              <span class="hits">31</span>
            

            

            <code class="ruby">        next if item.include?(&quot;node_modules/&quot;) # Ignore node_modules folder</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="31" data-linenumber="225">
            
              <span class="hits">31</span>
            

            

            <code class="ruby">        if File.directory?(item)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="226">
            
              <span class="hits">16</span>
            

            

            <code class="ruby">          File.chmod(0755, item)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="227">
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="228">
            
              <span class="hits">15</span>
            

            

            <code class="ruby">          fix_file_permissions(item)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="229">
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="230">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="231">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="232">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      executable_files = [&quot;bundle&quot;, &quot;rails&quot;, &quot;rake&quot;, &quot;spring&quot;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="233">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      executable_files.each do |file|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12" data-linenumber="234">
            
              <span class="hits">12</span>
            

            

            <code class="ruby">        file_path = File.join(path, &quot;bin&quot;, file)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12" data-linenumber="235">
            
              <span class="hits">12</span>
            

            

            <code class="ruby">        File.chmod(0755, file_path) if File.exist?(file_path)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="236">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="237">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="238">
            
              <span class="hits">3</span>
            

            

            <code class="ruby">      puts &quot;Permissions fixed for Ruby project at #{path}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="239">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="240">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="241">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="242">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="243">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    def fix_file_permissions(file)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="244">
            

            

            <code class="ruby">      # Não altera permissões de arquivos em diretórios restritos</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="245">
            
              <span class="hits">15</span>
            

            

            <code class="ruby">      return if file.include?(&#39;/restricted/&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="246">
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="247">
            

            

            <code class="ruby">      # Obtém o modo atual do arquivo</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="248">
            
              <span class="hits">15</span>
            

            

            <code class="ruby">      current_mode = File.stat(file).mode &amp; 0777</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="249">
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="250">
            

            

            <code class="ruby">      # Se o arquivo já tem permissões restritivas (menos de 0600), não altera</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="251">
            
              <span class="hits">15</span>
            

            

            <code class="ruby">      return if current_mode &lt; 0o600</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="252">
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="253">
            

            

            <code class="ruby">      # Define as permissões apropriadas</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="254">
            
              <span class="hits">15</span>
            

            

            <code class="ruby">      new_mode = if File.extname(file) == &quot;.rb&quot; || file.include?(&quot;/bin/&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11" data-linenumber="255">
            
              <span class="hits">11</span>
            

            

            <code class="ruby">                   0o755  # Executável</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="256">
            

            

            <code class="ruby">                 else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="257">
            
              <span class="hits">4</span>
            

            

            <code class="ruby">                   0o644  # Apenas leitura/escrita para o dono</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="258">
            

            

            <code class="ruby">                 end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="259">
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="260">
            

            

            <code class="ruby">      # Aplica as permissões apenas se forem diferentes</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="261">
            
              <span class="hits">15</span>
            

            

            <code class="ruby">      File.chmod(new_mode, file) if new_mode != current_mode</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="262">
            

            

            <code class="ruby">    rescue =&gt; e</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="263">
            

            

            <code class="ruby">      LOGGER.warn(&quot;Could not change permissions for #{file}: #{e.message}&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="264">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="265">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="266">
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="267">
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="268">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &quot;claiss/version&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="269">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &quot;claiss/commands&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="270">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &quot;claiss/cli&quot;</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="2440bc244b38cb51515aa3e914e1cda3ec123e8b">
  <div class="header">
    <h3>lib/claiss/cli.rb</h3>
    <h4>
      <span class="red">
  75.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">module CLAISS</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    class CLI</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      def self.call(*args)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="4">
            

            

            <code class="ruby">        Dry::CLI.new(CLAISS::Commands).call(*args)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d8ec39c1a4345bfa58a9e6f22fd99189fbf2c740">
  <div class="header">
    <h3>lib/claiss/commands.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>6</b> relevant lines.
      <span class="green"><b>6</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">module CLAISS</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">    module Commands</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      extend Dry::CLI::Registry</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      register &quot;version&quot;, Version, aliases: [&quot;v&quot;, &quot;-v&quot;, &quot;--version&quot;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      register &quot;refactor&quot;, Refactor</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            
              <span class="hits">1</span>
            

            

            <code class="ruby">      register &quot;fix_ruby_permissions&quot;, FixRubyPermissions</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
